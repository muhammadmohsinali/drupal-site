id: user_migration
label: 'User Migration'
migration_group: default
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  urls:
    - 'https://jsonplaceholder.typicode.com/users'
  item_selector: '[0:]'
  fields:
    - name: id
      label: 'User ID'
    - name: name
      label: 'Name'
    - name: username
      label: 'Username'
    - name: email
      label: 'Email'
    - name: phone
      label: 'Phone'
    - name: website
      label: 'Website'
    - name: company.name
      label: 'Company Name'
    - name: address.street
      label: 'Street'
    - name: address.city
      label: 'City'
    - name: address.zipcode
      label: 'Zipcode'
    - name: address.geo.lat
      label: 'Latitude'  # Updated to match the JSON structure
    - name: address.geo.lng
      label: 'Longitude'  # Updated to match the JSON structure
destination:
  plugin: entity:user
process:
  name: name
  field_username: username
  mail: email
  field_phone: phone
  field_website: website
  field_company_name: company.name
  field_address_street: address.street
  field_address_city: address.city
  field_address_zipcode: address.zipcode
  field_latitude: address.geo.lat  # Updated to correctly reference the nested structure
  field_longitude: address.geo.lng  # Updated to correctly reference the nested structure
